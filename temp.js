(function(){var e=this._,t=this.Backbone;if(!e||!t||!JSON)return;var n=t.View.prototype.constructor,r=t.View.extend;e.extend(t.View.prototype,{_init:function(){var e;this.switcher&&(e=this.switcher.key||"",this.switcher.options&&this.parseOptions(),this.listenTo(this.model,"change:"+e,this.handleResource)),this._userInit.apply(this,arguments)},parseOptions:function(){var e=this.switcher.options;e.target?this.$target=this.$(e.target):this.$target=this.$el,this._views=this.switcher.views},handleResource:function(e,t){this._currentView&&this._currentView.remove(),this.currentResource=t,this._render()},_render:function(){this._currentView=new this._views[this.currentResource]({model:this.model}),this.$target.append(this._currentView.render().el),this.trigger("after:render")}}),e.extend(t.View,{extend:function(e){return e._userInit=e.initialize,e.initialize=t.View.prototype._init,r.call(this,e)}})})();var e={a:{view:"TocView/TocView",model:["course"],collection:["classesCollection","studyClassStates"],router:{routes:{"course/:courseId/toc/studyClass/:studyClassId":"showTableOfContents"},handlers:{showTableOfContents:function(e,t){console.log("course")}}}},b:{view:"TocItemView/TocItemView",model:["course"],router:{routes:{"course/:courseId/studyClass/:studyClassId/item/:itemId":"showTocItem"},handlers:{showTocItem:function(e,t,n){}}}}},t=Backbone.View.extend({switcher:{key:"resource",views:{viewA:SomeViewA,viewB:SomeViewB}},initialize:function(){console.log("init...",this.options)}}),n=Backbone.Model.extend({defaults:{resource:"a"}}),r=new t({model:new n});