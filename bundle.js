!function(){"use strict";angular.module("htmlTemplates",[])}(),function(){"use strict";angular.module("drawer",[])}(),function(){"use strict";function e(e){e.when("/myPlaylists",{templateUrl:"app/my-playlists/my-playlists.tpl.html",controller:"MyPlaylistsController",controllerAs:"vm"}).when("/playlist/:playlistId",{templateUrl:"app/my-playlists/my-playlist.tpl.html",controller:"MyPlaylistCtrl",controllerAs:"vm",resolve:{videos:t}})}function t(e,t){return t.getPlaylist(e.current.params.playlistId)}angular.module("youtube.playlists",["youtube.api","youtube.directives","youtube.player","echoes.resources"]).config(e),e.$inject=["$routeProvider","$locationProvider"],t.$inject=["$route","YoutubeVideoInfo"]}(),function(){"use strict";angular.module("media.info",["youtube.player","echoes.services","ngSanitize"])}(),function(){"use strict";angular.module("navigator",[])}(),function(){"use strict";angular.module("playlist.editor",["echoes.services"])}(),function(){"use strict";function e(){}angular.module("presets",["echoes.resources","echoes.services"]).config(e),e.$inject=["$httpProvider"]}(),function(){"use strict";angular.module("echoes.resources",[])}(),function(){"use strict";angular.module("media.search",["echoes.services","youtube.player"])}(),function(){"use strict";angular.module("echoes.services",["echoes.resources","LocalStorageModule","youtube.api"])}(),function(){"use strict";angular.module("youtube.player",[])}(),angular.module("youtube.directives",[]),angular.module("ui.controls",[]),function(){"use strict";function e(e,t,n){function i(i){function o(t){return d=e.defer(),t=t||{},r(angular.copy(g,t)),d.promise}function r(e){n.load().then(function(){gapi.client.youtube[p].list(e).then(u)})}function u(e){f?a(e):l(e)}function a(e){var t=e.result.nextPageToken,n=angular.copy(g),i=t&&"all"===f||y<parseInt(f);return n.pageToken=t,i?(d.notify(e.result),y++,void r(n)):void l(e)}function l(e){d.resolve(e.result),t.$apply()}function c(e){return gapi.client.youtube[p].insert(e).then(function(e){return console.log("insert method done",e),e})}function s(e){var t={id:e};return gapi.client.youtube[p]["delete"](t)}var d,p=i.resourceName,f=i.pages||0,y=0,g={part:"snippet,contentDetails",maxResults:50,mine:!0},m={list:o,params:g,insert:c,remove:s};return m}return i}angular.module("youtube.api",["youtube.directives"]).factory("uGapi",e),e.$inject=["$q","$rootScope","YoutubeApi"]}(),function(){"use strict";function e(e,t,n){n.setPrefix("EchoesPlayer"),e.when("/",{templateUrl:"app/youtube-videos/youtube.videos.tpl.html",controller:"YoutubeVideosCtrl",controllerAs:"vm"}).when("/video/:id",{templateUrl:"app/youtube-video/youtube.video.tpl.html",controller:"YoutubeVideoCtrl"}).otherwise({redirectTo:"/"})}angular.module("mediaDeck",["ngRoute","ngSanitize","htmlTemplates","youtube.directives","ui.controls","ui.bootstrap","echoes.services","echoes.resources","youtube.api","youtube.playlists","youtube.player","media.info","media.search","drawer","presets","ngAnimate","LocalStorageModule","infinite-scroll","navigator","playlist.editor","ui.sortable"]).config(e),e.$inject=["$routeProvider","$locationProvider","localStorageServiceProvider"]}(),function(){function e(e,t,n){var i=this;i.searching=t.getIsSearching,i.drawerIsOpened=n.opened}angular.module("mediaDeck").controller("AppCtrl",e),e.$inject=["$scope","YoutubeSearch","DrawerSettings"]}(),function(){function e(e,t){function n(e,n){t.setType(t.types.VIDEO),t.setDuration(o[n]),t.search()}var i=this;i.durations=["Any","Short (less then 4 minutes)","Medium (4-20 minutes)","Long (longer than 20 minutes)"];var o=["","short","medium","long"];i.onDurationChange=n}angular.module("mediaDeck").controller("DurationCtrl",e),e.$inject=["$scope","YoutubeSearch"]}(),function(){function e(e,t,n){function i(e){o.active=e,n.setType(e.value)}var o=this;o.data={items:[{label:"Videos",icon:"film",value:"video"},{label:"Playlists",icon:"th-list",value:"playlist"}]},o.active=o.data.items[0],o.setFeed=i}angular.module("mediaDeck").controller("FeedCtrl",e),e.$inject=["$scope","$rootScope","YoutubeSearch"]}(),function(){"use strict";function e(e,t,n,i){function o(){n.auth().then(function(e){i.update(e)})}function r(e){i.update(e.items[0])}function u(e){i.signOut(),e.stopPropagation()}var a=this;a.title="UserMenuCtrl",a.saveUser=r,a.signOut=u,a.user=i.data,o()}angular.module("mediaDeck").controller("UserMenuCtrl",e),e.$inject=["$scope","$rootScope","YoutubeApi","YoutubeUser"]}(),function(){"use strict";function e(){function e(){}var t={link:e,restrict:"A"};return t}angular.module("mediaDeck").directive("loader",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){function t(t,n,i){function o(){n.toggleClass(r,e.opened())}var r=i.drawerToggle;n.bind("click",function(n){n.preventDefault(),e.toggle(),r&&r.length&&o(),t.$apply()}),o()}var n={link:t,restrict:"A"};return n}angular.module("drawer").directive("drawerToggle",e),e.$inject=["DrawerSettings"]}(),function(){"use strict";function e(e){function t(t,n,i){function o(){n.toggleClass(r,!t.drawerOpened())}var r=i.drawerClosed;t.drawerOpened=e.opened,t.$watch("drawerOpened()",function(e,t){e!==t&&o()}),o()}var n={link:t,restrict:"A"};return n}angular.module("drawer").directive("drawerClosed",e),e.$inject=["DrawerSettings"]}(),function(){"use strict";function e(e){function t(){}var n=this;n.title="DrawerCtrl",n.opened=e.opened,n.toggle=e.toggle,t()}angular.module("drawer").controller("DrawerCtrl",e),e.$inject=["DrawerSettings"]}(),function(){"use strict";function e(){function e(){n=!n}function t(){return n}var n=!0,i={toggle:e,opened:t};return i}angular.module("drawer").factory("DrawerSettings",e)}(),angular.module("mediaDeck").filter("titleCase",[function(){var e=function(e){for(var t=e.split(" "),n=0;n<t.length;n++)t[n]=t[n].charAt(0).toUpperCase()+t[n].slice(1);return t.join(" ")};return e}]),function(){"use strict";function e(e,t,n){function i(){}function o(e){console.log("playing user video"),n.playVideoId(e),n.nowPlaylist.length=0,angular.extend(n.nowPlaylist,u.videos),u.videos.forEach(function(t,i){t===e&&(n.nowPlaying.index=i)})}function r(e){n.queueVideo(e)}var u=this;u.title="MyPlaylistCtrl",u.videos=t,u.playVideo=o,u.queueVideo=r,i()}angular.module("youtube.playlists").controller("MyPlaylistCtrl",e),e.$inject=["$scope","videos","YoutubePlayerSettings"]}(),function(){"use strict";function e(e,t,n,i,o){function r(e){i.getPlaylist(e.id).then(r)}var u=this;u.title="UserPlaylistsCtrl",u.playlists=n.tracks,u.playPlaylist=r,u.search="",u.isUserSignedIn=o.isSignedIn}angular.module("youtube.playlists").controller("MyPlaylistsController",e),e.$inject=["$http","YoutubePlayerSettings","UserPlaylists","YoutubeVideoInfo","YoutubeUser"]}(),function(){"use strict";function e(e,t,n){function i(e){e&&e.length&&(a.video.title=e[0].snippet.title,a.video.desc=o(e[0].snippet.description),a.video.thumb=e[0].snippet.thumbnails.high.url)}function o(e){var t=e.replace(/([0-9]*[0-9]*:*[0-9]*[0-9]:[0-9][0-9])/gim,'<a class="btn btn-mini play-time" time="$1">$1</a>\r',"gim");return t}function r(e){n.seekTo(u(e))}function u(e){e=e.split(":");var t=3===e.length,n=t?60*parseInt(e[0],10)*60:0,i=t?e[1]:e[0],o=t?e[2]:e[1];return n+60*parseInt(i,10)+parseInt(o,10)}var a=this;a.video={title:"No Media Yet...",desc:"",thumb:"",id:n.getCurrentId},a.onDescriptionClick=r,e.$watch("vm.video.id()",function(e){e&&t.list(e).then(i)})}angular.module("media.info").controller("MediaInfoCtrl",e),e.$inject=["$scope","YoutubeVideoInfo","YoutubePlayerSettings"]}(),function(){"use strict";function e(e,t){function n(n,i,o){function r(e){var n=e.target.innerText;u(n),t.$apply()}var u=e(o.onSourceClick)(n);i.bind("click",r)}var i={link:n,restrict:"A"};return i}angular.module("media.info").directive("onSourceClick",e),e.$inject=["$parse","$rootScope"]}(),function(){"use strict";function e(){function e(e,t){function n(e){var t=angular.element(e.target),n=t.parent();n.hasClass(i)||(r.removeClass(i),n.addClass(i))}var i="active",o=t.find("a"),r=o.parent();o.bind("click",n)}var t={link:e,restrict:"A",scope:{}};return t}angular.module("navigator").directive("navigator",e)}(),function(){"use strict";function e(e,t){function n(n){function i(){n.$watch("vm.search",function(e){var t=a.playlists.map(function(e){return e.snippet.title}).join(" ");a.showCreate=-1===t.indexOf(e)?!0:!1})}function o(e){function i(t){200===t.status&&(e.contentDetails.itemCount++,e.inProcess=!1,n.$apply())}e.inProcess=!0,t.addToPlaylist(e.id,a.getMedia()).then(i)}function r(){t.createPlaylist(a.search,"")}function u(e){return e.inProcess=!0,t.removePlaylist(e.id).then(function(){e.inProcess=!1,n.$apply()})}var a=this;a.getMedia=e.getMedia,a.playlists=t.tracks,a.search="",a.add=o,a.showCreate=!1,a.create=r,a.remove=u,i()}function i(t,n){function i(){t.$watch("isVisible()",function(e,t){if(!angular.equals(e,t)){var n=e?"show":"hide";r.modal(n)}}),r.on("hidden.bs.modal",function(){e.hide(),t.vm.search="",t.$apply()})}function o(){r.modal("hide")}var r=n;t.isVisible=e.visibility,t.close=o,i()}var o={link:i,controller:n,controllerAs:"vm",restrict:"E",replace:!0,templateUrl:"app/playlist-editor/playlist.editor.tpl.html",scope:{}};return n.$inject=["$scope"],o}angular.module("playlist.editor").directive("playlistEditor",e),e.$inject=["PlaylistEditorSettings","UserPlaylists"]}(),function(){"use strict";function e(){function e(e){u=e}function t(){return u}function n(e){u=e}function i(){l=!0}function o(){l=!1}function r(){return l}var u,a={add:e,getMedia:t,addMedia:n,show:i,hide:o,visibility:r},l=!1;return a}angular.module("playlist.editor").factory("PlaylistEditorSettings",e),e.$inject=["UserPlaylists"]}(),function(){function e(e,t){function n(n){t.params.q=e.update(t.params.q,n),t.search()}var i=this;i.data={label:"Preset"},i.presets=e.items,i.updatePreset=n,i.selected=e.selected().index}angular.module("presets").controller("PresetCtrl",e),e.$inject=["preset","YoutubeSearch"]}(),function(){"use strict";function e(e){function t(){i(c)}function n(t,n){var o=t.replace(c,"").trim();return c=n.toLowerCase(),"all"===c&&(c=""),o+=" "+c.toLowerCase(),e.set(a.PRESET,c),i(c),o}function i(e){var t=l.indexOf(e);s=-1===t?0:t}function o(){return{label:c,index:s}}function r(){return u}var u,a={PRESET:"preset"},l=["all","albums","live"],c=e.get(a.PRESET),s=0,d={selected:o,update:n,items:l,getQuery:r};return t(),d}function t(){function e(e){function t(){}return e.url.match(/v3\/search/gim)&&(e.transformRequest=t),e}return{request:e}}angular.module("presets").factory("preset",e).factory("searchListener",t),e.$inject=["localStorageService"],t.$inject=["preset"]}(),function(){"use strict";angular.module("echoes.resources").constant("YOUTUBE_API_KEY","AIzaSyB7fFNreY1UzX1la5arnnAi3ZOyvqOV6kk")}(),function(){"use strict";function e(e,t,n,i,o){function r(){e.$watch("vm.params.q",o.resetPageToken)}function u(){o.search()}function a(){u()}function l(e){function o(e){r.resolve(e[1].map(function(e){return e[0]}))}var r=n.defer();i.handleEchoesSuggest=o;{var u={params:{hl:"en",ds:"yt",xhr:"t",client:"youtube",q:e,callback:"handleEchoesSuggest"}};t.jsonp("http://suggestqueries.google.com/complete/search",u)}return r.promise}var c=this;c.title="SearchCtrl",c.params=o.params,c.search=u,c.complete=l,c.updateSearch=a,r()}angular.module("media.search").controller("SearchCtrl",e),e.$inject=["$scope","$http","$q","$window","YoutubeSearch"]}(),function(){"use strict";function e(e,t){function n(t){return o.params.id=t,e.get(i,o).then(function(e){return e.data.items})}var i="https://www.googleapis.com/youtube/v3/playlists",o={params:{part:"snippet,contentDetails",key:t,id:"",maxResults:50}},r={list:n};return r}angular.module("echoes.services").factory("YoutubePlaylistInfo",e),e.$inject=["$http","YOUTUBE_API_KEY"]}(),function(){"use strict";function e(e,t,n,i,o){function r(t,i){function r(e){var t=b.params.type;y=e.data.nextPageToken;var n=e.data.items.map(function(e){return e.id[v[t]]}).join(","),i=$[t].list(n);return i}function u(e){d()===h.VIDEO&&e.forEach(function(e){e.time=n.toFriendlyDuration(e.contentDetails.duration)}),Array.prototype.push.apply(P,e)}function l(){w=!1}return i||a(),w=!0,t&&t!==b.params.q&&(b.params.pageToken=""),f(),b.params.q=t||b.params.q,o.set(m.QUERY,b.params.q),e.get(g,b).then(r).then(u).then(l)}function u(){!w&&P.length&&(b.params.pageToken=y,r(b.params.q,!0))}function a(){P.length=0}function l(){b.params.pageToken=""}function c(e){b.params.type=e,l(),P.length=0}function s(e){return""===e||void 0===e?void delete b.params.videoDuration:void(b.params.videoDuration=e)}function d(){return b.params.type}function p(){return w}function f(){b.params.type===h.PLAYLIST&&delete b.params.videoDuration}var y,g="https://www.googleapis.com/youtube/v3/search",m={QUERY:"query"},h={VIDEO:"video",PLAYLIST:"playlist"},v={video:"videoId",playlist:"playlistId"},b={params:{part:"snippet,id",key:t,q:o.get(m.QUERY),maxResults:50,type:h.VIDEO}},$={video:n,playlist:i},P=[],w=!1,S={search:r,setType:c,setDuration:s,items:P,types:h,params:b.params,getFeedType:d,getIsSearching:p,searchMore:u,resetPageToken:l};return S}angular.module("echoes.services").factory("YoutubeSearch",e),e.$inject=["$http","YOUTUBE_API_KEY","YoutubeVideoInfo","YoutubePlaylistInfo","localStorageService"]}(),function(){"use strict";function e(e,t,n){function i(t){return o(t),e.get(a,l).then(function(e){return e.data.items})}function o(e){l.params.id=e}function r(e){var t=e.split("PT")[1],n="";return t?(t=t.replace(/(H|M)/g,":").replace("S",""),n=t.split(":"),n=n.map(function(e){return 1===e.length?"0"+e:e})):(t=e.split("P")[1],t=t.replace("D",""),n=[24*parseInt(t),":00:00"]),n.join(":")}function u(e){function t(e){var t=e.items.map(function(e){return e.snippet.resourceId.videoId}).join(",");return i(t)}function o(e){return e.forEach(function(e){e.time=r(e.contentDetails.duration)}),e}return n.getPlaylist(e).then(t).then(o)}var a="https://www.googleapis.com/youtube/v3/videos",l={params:{part:"snippet,contentDetails,statistics",key:t,id:"",maxResults:50}},c={list:i,setId:o,toFriendlyDuration:r,getPlaylist:u};return c}angular.module("echoes.services").factory("YoutubeVideoInfo",e),e.$inject=["$http","YOUTUBE_API_KEY","UserPlaylists"]}(),function(){"use strict";function e(e,t){function n(e,n){o.nowPlaying.index=n,t.playVideoId(e)}function i(e,n,i){e.stopPropagation(),t.remove(n,i)}var o=this;o.title="UserPlaylistsCtrl",o.playlists=t.nowPlaylist,o.playVideo=n,o.nowPlaying=t.nowPlaying,o.playlistSearch="",o.remove=i}angular.module("mediaDeck").controller("UserPlaylistsCtrl",e),e.$inject=["$http","YoutubePlayerSettings"]}(),function(){"use strict";function e(e){function t(t,n,i){t.$watch("isFullScreen()",function(e,t){e!==t&&n.toggleClass(i.playerResizer,e)}),t.isFullScreen=function(){return e.isFullScreen()}}var n={link:t,restrict:"A"};return n}angular.module("youtube.player").directive("playerResizer",e),e.$inject=["PlayerResizer"]}(),function(){function e(e){function t(t){if(o=t,!t)return r.height=i.height,void(r.width=i.width);var n=["sidebar"],u=-1===n.indexOf("sidebar")?$(".sidebar").outerWidth():0,a=e.innerHeight-$("#youtube-player-container").outerHeight(),l=e.innerWidth-u;r.height=a,r.width=l}function n(){return o}var i={height:270,width:300},o=!1,r={height:i.height,width:i.width,setFullScreen:t,isFullScreen:n};return r}angular.module("youtube.player").factory("PlayerResizer",e),e.$inject=["$window"]}(),function(){"use strict";function e(e,t,n){var i=n.defer(),o={ready:i.promise};return function(){var e=["http:","https:"],t="//www.youtube.com/iframe_api";e.indexOf(window.location.protocol)<0&&(t="http:"+t);var n=document.createElement("script");n.src=t;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}(),t.onYouTubeIframeAPIReady=function(){i.resolve()},o}angular.module("youtube.player").factory("youtubePlayerApi",e),e.$inject=["$rootScope","$window","$q"]}(),function(){"use strict";function e(){function e(e,t,i,o){function r(e){n.seekTo(e,!0)}function u(){return n=new YT.Player(t.id,{height:e.height,width:e.width,videoId:e.videoId,events:{onReady:l,onStateChange:a}}),angular.extend(o.ytplayer,n),n.id=t.id,n}function a(t){var n=t.data;e.$apply(function(){n===YT.PlayerState.ENDED&&o.playNextTrack()})}function l(){}var c=this;c.seek=o.getSeek,e.$watch("vm.seek()",function(e,t){n&&e!==t&&r(e)}),i.ready.then(u)}function t(e){function t(e){n.loadVideoById(e),n.playVideo()}e.$watch("videoId",function(e){n&&t(e)}),e.$watch("height",function(t,i){n&&t!==i&&n.setSize(e.width,e.height)})}var n,i={link:t,controller:e,controllerAs:"vm",restrict:"A",scope:{videoId:"=",height:"=",width:"=",index:"=",seek:"="}};return e.$inject=["$scope","$attrs","youtubePlayerApi","YoutubePlayerSettings"],i}angular.module("youtube.player").directive("youtubePlayer",e),e.$inject=["$rootScope","$window"]}(),function(){function e(){function t(){return s.mediaId}function n(e){s.mediaId=e.id,d=0,o(e),s.media=e}function i(e){p.push(e||{})}function o(e){p.some(function(t,n){return t.id===e.id?(s.index=n,!0):void 0})}function r(t,n){var i=angular.isNumber(n)?n:0,o=t[i];e.playVideoId(o),e.nowPlaylist.length=0,angular.extend(e.nowPlaylist,t)}function u(){return d}function a(e){!isNaN(e)&&angular.isNumber(e)&&(d=e)}function l(){var e=s.index+1;e===p.length&&(e=0),n(p[e])}function c(e,t){p.splice(t,1)}var s={mediaId:"",index:0,media:{}},d=0,p=[],f={},y={getCurrentId:t,playVideoId:n,playPlaylist:r,nowPlaying:s,nowPlaylist:p,queueVideo:i,getSeek:u,seekTo:a,playNextTrack:l,remove:c,ytplayer:f};return y}angular.module("youtube.player").factory("YoutubePlayerSettings",e)}(),function(){"use strict";function e(e,t,n,i){var o=function(e){var t=e.split("PT")[1].replace(/(H|M)/g,":").replace("S",""),n=t.split(":");return n=n.map(function(e){return 1===e.length?"0"+e:e}),n.join(":")};t.list(n.id).then(function(t){e.video=t[0],e.time=o(t[0].contentDetails.duration)}),e.goBack=function(){i.url("/")}}angular.module("mediaDeck").controller("YoutubeVideoCtrl",e),e.$inject=["$scope","YoutubeVideoInfo","$routeParams","$location"]}(),function(){function e(e,t,n,i){function o(){n.search()}function r(e){return"youtube#playlist"===e.kind?void i.getPlaylist(e.id).then(a):(t.queueVideo(e),void t.playVideoId(e))}function u(e){t.queueVideo(e)}function a(e){angular.extend(t.nowPlaylist,e),t.playVideoId(e[0])}var l=this;l.playVideo=r,l.queueVideo=u,l.feedType=n.getFeedType,l.videos=n.items,l.loadMore=n.searchMore,o()}angular.module("mediaDeck").controller("YoutubeVideosCtrl",e),e.$inject=["$scope","YoutubePlayerSettings","YoutubeSearch","YoutubeVideoInfo"]}(),function(){function e(e,t,n,i){function o(e){a.showPlayer=e}function r(){a.isFullScreen=!a.isFullScreen,n.setFullScreen(a.isFullScreen)}function u(){""!==a.video.mediaId&&(i.addMedia(a.video.media),i.show())}var a=this;a.video=t.nowPlaying,a.nowPlaylist=t.nowPlaylist,a.size=n,a.showPlayer=!1,a.togglePlayer=o,a.isFullScreen=!1,a.toggleFullScreen=r,a.seek=t.getSeek,a.addToPlaylist=u,a.playNextTrack=t.playNextTrack,e.$watch("vm.video",function(e,t){e!==t&&o(!0)},!0)}angular.module("mediaDeck").controller("YoutubePlayerCtrl",e),e.$inject=["$scope","YoutubePlayerSettings","PlayerResizer","PlaylistEditorSettings"]}(),function(){"use strict";function e(e,t,n){function i(){e.$on("user-signed-in",o)}function o(){d.list().then(r,u,r)}function r(e){Array.prototype.push.apply(f,e.items)}function u(e){console.log(e)}function a(e){return delete p.params.mine,p.params.playlistId=e,p.list()}function l(e,t){var n={part:"snippet",resource:{snippet:{playlistId:e,resourceId:{videoId:t.id,playlistId:e,kind:"youtube#video"}}}};return p.insert(n)}function c(e){return d.remove(e).then(function(t){return f.some(function(t,n){t.id===e&&f.splice(n,1)}),t})}function s(e,t){var n={part:"snippet,contentDetails",resource:{snippet:{title:e,description:t||""}}};return f.length=0,d.insert(n).then(o)}var d=n,p=t({resourceName:"playlistItems"}),f=[],y={tracks:f,list:o,getPlaylist:a,addToPlaylist:l,removePlaylist:c,createPlaylist:s};return i(),y}function t(e){return e({resourceName:"playlists",pages:"all"})}angular.module("youtube.api").factory("UserPlaylists",e).factory("ApiPlaylists",t),e.$inject=["$rootScope","uGapi","ApiPlaylists"],t.$inject=["uGapi"]}(),function(){"use strict";function e(e,t){function n(t){angular.copy(t,u),e.$broadcast("user-signed-in",u)}function i(){return Object.keys(u).length}function o(){function e(e){console.log("signout success",e),r()}function n(t){return""===t.statusText?e(t):void console.log("singout failed")}var i=a+gapi.auth.getToken().access_token;t.get(i).then(e,n)}function r(){Object.keys(u).forEach(function(e){delete u[e]})}var u={},a="https://accounts.google.com/o/oauth2/revoke?token=",l={update:n,data:u,isSignedIn:i,signOut:o};return l}angular.module("echoes.resources").factory("YoutubeUser",e),e.$inject=["$rootScope","$http"]}(),function(){"use strict";function e(e,t,n,i){function o(){e.onGapiLoad=function(){t.$apply(function(){l.resolve(),console.log("youtube api ready")})},function(){var e=["http:","https:"],t="//apis.google.com/js/client.js?onload=onGapiLoad";e.indexOf(window.location.protocol)<0&&(t="http:"+t);var n=document.createElement("script");n.src=t;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}()}function r(){return l.promise}function u(){return r().then(function(){gapi.auth.authorize({client_id:"971861197531",scope:"https://www.googleapis.com/auth/youtube",immediate:!0},function(e){a(e)})}),c.promise}function a(e){i.load("youtube","v3").then(function(){gapi.client.youtube.channels.list({part:"snippet,contentDetails",mine:!0}).then(function(n){console.log("results user",n),c.resolve(n.result.items[0],e),t.$digest()})})}var l=n.defer(),c=n.defer(),s={load:r,auth:u,signIn:a};return o(),s}function t(e,t,n){function i(e,i){function o(e){e.preventDefault(),n.load().then(function(){gapi.auth.authorize({client_id:"971861197531",scope:"https://www.googleapis.com/auth/youtube",immediate:!1},r)})}function r(e){console.log("auth Result",e),t.signIn(e)}i.get(0).addEventListener("click",o)}var o={link:i,restrict:"A",scope:{youtubeSignIn:"&"}};return o}function n(e,t,n,i,o){function r(){return o.load().then(function(){u.resolve()}),u.promise}var u=e.defer(),a={load:r};return a}function i(e){function t(e,t){return gapi.client.setApiKey(i),gapi.client.load(e,t,n),o.promise}function n(e){console.log("client load success",e),o.resolve(e)}var i="AIzaSyCgrK5ds9uCSRM-WBUFm8V8jPX66q8-Od0",o=e.defer(),r={load:t};return r}angular.module("youtube.directives").directive("youtubeSignIn",t).factory("YoutubeApi",e).factory("YoutubeClientApi",n).factory("GoogleClientApi",i),e.$inject=["$window","$rootScope","$q","GoogleClientApi"],t.$inject=["$window","YoutubeApi","YoutubeClientApi","GoogleClientApi"],n.$inject=["$q","$rootScope","$window","GoogleClientApi","YoutubeApi"],i.$inject=["$q"]}(),function(){"use strict";function e(){function e(e){e.playSelectedVideo=function(t){e.onSelect({video:t})},e.queueSelectedVideo=function(t){e.onQueue({video:t})}}var t={restrict:"E",replace:!0,templateUrl:"app/directives/youtube/youtube-list/media-list.tpl.html",scope:{videos:"=model",onSelect:"&",onQueue:"&"},link:e};return t}angular.module("youtube.directives").directive("mediaList",e)}(),function(){function e(){function e(e){e.isVideoItem=function(e){return"youtube#video"===e.id.kind},e.isChannelItem=function(e){return"youtube#channel"===e.id.kind},e.playVideo=function(t){e.onPlay({video:t})}}var t={restrict:"E",templateUrl:"app/directives/youtube/youtube-playlist/youtube.playlist.tpl.html",replace:!0,scope:{onPlay:"&",video:"="},link:e};return t}angular.module("youtube.directives").directive("youtubePlaylistItem",e)}(),function(){function e(e,t){function n(e){function n(t){e.onPlay({video:t})}function i(t){e.onQueue({video:t})}function o(){t.addMedia(e.video),t.show()}var r=this;r.playVideo=n,r.queueVideo=i,r.add=o}var i={restrict:"E",templateUrl:"app/directives/youtube/youtube-media/youtube.media.tpl.html",replace:!0,scope:{onPlay:"&",onQueue:"&",video:"="},controller:n,controllerAs:"vm"};return n.$inject=["$scope"],i}angular.module("youtube.directives").directive("youtubeMedia",e),e.$inject=["UserPlaylists","PlaylistEditorSettings"]}(),function(){"use strict";function e(){function e(e,t,n){e.activeIndex=""!==n.selected?parseInt(e.selected):0,e.handleClick=function(t,n){e.activeIndex=n,e.onSelect({item:t,index:n})}}var t={restrict:"E",replace:!0,templateUrl:"app/directives/ui/e-dropdown/e-dropdown-tpl.html",scope:{label:"@",icon:"@",items:"=",onSelect:"&",selected:"@"},link:e};return t}angular.module("ui.controls").directive("eDropdown",e)}();