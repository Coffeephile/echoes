!function(){"use strict";angular.module("htmlTemplates",[])}(),function(){"use strict";angular.module("drawer",[])}(),function(){"use strict";angular.module("media.info",["youtube.player","echoes.services","ngSanitize"])}(),function(){"use strict";function e(e){e.when("/myPlaylists",{templateUrl:"app/my-playlists/my-playlists.tpl.html",controller:"MyPlaylistsController",controllerAs:"vm"}).when("/playlist/:playlistId",{templateUrl:"app/my-playlists/my-playlist.tpl.html",controller:"MyPlaylistCtrl",controllerAs:"vm",resolve:{videos:t,playlist:n}})}function t(e,t,n,i){var o=e.current.params.playlistId;return i.isSignedIn()?t.getPlaylist(o):n.list(o)}function n(e,t){return t.list(e.current.params.playlistId)}angular.module("youtube.playlists",["youtube.api","youtube.directives","youtube.player","echoes.resources"]).config(e),e.$inject=["$routeProvider","$locationProvider"],t.$inject=["$route","YoutubeVideoInfo","PlaylistInfo","YoutubeUser"],n.$inject=["$route","YoutubePlaylistInfo"]}(),function(){"use strict";angular.module("navigator",[])}(),function(){"use strict";angular.module("playlist.editor",["echoes.services"])}(),function(){"use strict";function e(){}angular.module("presets",["echoes.resources","echoes.services"]).config(e),e.$inject=["$httpProvider"]}(),function(){"use strict";angular.module("echoes.resources",[])}(),function(){"use strict";angular.module("media.search",["echoes.services","youtube.player"])}(),function(){"use strict";angular.module("echoes.services",["echoes.resources","LocalStorageModule","youtube.api"])}(),function(){"use strict";angular.module("youtube.player",[])}(),angular.module("ui.controls",[]),function(){"use strict";function e(e,t,n){function i(t){function i(t,n){return l=e.defer(),t=t||{},o(angular.copy(c,t),n),l.promise}function o(e,t){n.auth().then(function(){r(e,t).then(function(e){l.resolve(e.result)})})}function r(t,n){function i(){return gapi.client.youtube[s].list(t).then(function(e){return o=e.result.nextPageToken,e}).then(n).then(function(e){var n=e;return Array.prototype.push.apply(r,e.length?e:e.result.items),o?(t.pageToken=o,i()):(e.result&&(e.result.items=r),e.length&&(n={items:r}),u.resolve(n),n)})}var o,r=[],u=e.defer();return i(),u.promise}function u(e){return gapi.client.youtube[s].insert(e).then(function(e){return e})}function a(e){var t={id:e};return gapi.client.youtube[s]["delete"](t)}var l,s=t.resourceName,c=(t.pages||0,{part:"snippet,contentDetails",maxResults:50,mine:!0}),d={list:i,params:c,insert:u,remove:a};return d}return i}angular.module("youtube.api",["youtube.directives"]).factory("uGapi",e),e.$inject=["$q","$rootScope","YoutubeApi"]}(),angular.module("youtube.directives",[]),function(){"use strict";function e(e,t,n){n.setPrefix("EchoesPlayer"),e.when("/",{templateUrl:"app/youtube-videos/youtube.videos.tpl.html",controller:"YoutubeVideosCtrl",controllerAs:"vm"}).when("/video/:id",{templateUrl:"app/youtube-video/youtube.video.tpl.html",controller:"YoutubeVideoCtrl"}).otherwise({redirectTo:"/"})}angular.module("mediaDeck",["ngRoute","ngSanitize","htmlTemplates","youtube.directives","ui.controls","ui.bootstrap","echoes.services","echoes.resources","youtube.api","youtube.playlists","youtube.player","media.info","media.search","drawer","presets","ngAnimate","LocalStorageModule","infinite-scroll","navigator","playlist.editor","ui.sortable"]).config(e),e.$inject=["$routeProvider","$locationProvider","localStorageServiceProvider"]}(),function(){function e(e,t,n){var i=this;i.searching=t.getIsSearching,i.drawerIsOpened=n.opened}angular.module("mediaDeck").controller("AppCtrl",e),e.$inject=["$scope","YoutubeSearch","DrawerSettings"]}(),function(){function e(e,t){function n(e,n){t.setType(t.types.VIDEO),t.setDuration(o[n]),t.search()}var i=this;i.durations=["Any","Short (less then 4 minutes)","Medium (4-20 minutes)","Long (longer than 20 minutes)"];var o=["","short","medium","long"];i.onDurationChange=n}angular.module("mediaDeck").controller("DurationCtrl",e),e.$inject=["$scope","YoutubeSearch"]}(),function(){function e(e,t,n){function i(e){o.active=e,n.setType(e.value)}var o=this;o.data={items:[{label:"Videos",icon:"film",value:"video"},{label:"Playlists",icon:"th-list",value:"playlist"}]},o.active=o.data.items[0],o.setFeed=i}angular.module("mediaDeck").controller("FeedCtrl",e),e.$inject=["$scope","$rootScope","YoutubeSearch"]}(),function(){"use strict";function e(e,t,n,i){function o(){n.auth().then(function(e){i.update(e)})}function r(e){i.update(e.items[0])}function u(e){i.signOut(),e.stopPropagation()}var a=this;a.title="UserMenuCtrl",a.saveUser=r,a.signOut=u,a.user=i.data,o()}angular.module("mediaDeck").controller("UserMenuCtrl",e),e.$inject=["$scope","$rootScope","YoutubeApi","YoutubeUser"]}(),function(){"use strict";function e(){function e(){}var t={link:e,restrict:"A"};return t}angular.module("mediaDeck").directive("loader",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){function t(t,n,i){function o(){n.toggleClass(r,e.opened())}var r=i.drawerToggle;n.bind("click",function(n){n.preventDefault(),e.toggle(),r&&r.length&&o(),t.$apply()}),o()}var n={link:t,restrict:"A"};return n}angular.module("drawer").directive("drawerToggle",e),e.$inject=["DrawerSettings"]}(),function(){"use strict";function e(e){function t(t,n,i){function o(){n.toggleClass(r,!t.drawerOpened())}var r=i.drawerClosed;t.drawerOpened=e.opened,t.$watch("drawerOpened()",function(e,t){e!==t&&o()}),o()}var n={link:t,restrict:"A"};return n}angular.module("drawer").directive("drawerClosed",e),e.$inject=["DrawerSettings"]}(),function(){"use strict";function e(e){function t(){}var n=this;n.title="DrawerCtrl",n.opened=e.opened,n.toggle=e.toggle,t()}angular.module("drawer").controller("DrawerCtrl",e),e.$inject=["DrawerSettings"]}(),function(){"use strict";function e(){function e(){n=!n}function t(){return n}var n=!0,i={toggle:e,opened:t};return i}angular.module("drawer").factory("DrawerSettings",e)}(),angular.module("mediaDeck").filter("titleCase",[function(){var e=function(e){for(var t=e.split(" "),n=0;n<t.length;n++)t[n]=t[n].charAt(0).toUpperCase()+t[n].slice(1);return t.join(" ")};return e}]),function(){"use strict";function e(e,t,n){function i(e){e&&e.length&&(a.video.title=e[0].snippet.title,a.video.desc=o(e[0].snippet.description),a.video.thumb=e[0].snippet.thumbnails.high.url)}function o(e){var t=e.replace(/([0-9]*[0-9]*:*[0-9]*[0-9]:[0-9][0-9])/gim,'<a class="btn btn-mini play-time" time="$1">$1</a>\r',"gim");return t}function r(e){n.seekTo(u(e))}function u(e){e=e.split(":");var t=3===e.length,n=t?60*parseInt(e[0],10)*60:0,i=t?e[1]:e[0],o=t?e[2]:e[1];return n+60*parseInt(i,10)+parseInt(o,10)}var a=this;a.video={title:"No Media Yet...",desc:"",thumb:"",id:n.getCurrentId},a.onDescriptionClick=r,e.$watch("vm.video.id()",function(e){e&&t.list(e).then(i)})}angular.module("media.info").controller("MediaInfoCtrl",e),e.$inject=["$scope","YoutubeVideoInfo","YoutubePlayerSettings"]}(),function(){"use strict";function e(e,t){function n(n,i,o){function r(e){var n=e.target.innerText;u(n),t.$apply()}var u=e(o.onSourceClick)(n);i.bind("click",r)}var i={link:n,restrict:"A"};return i}angular.module("media.info").directive("onSourceClick",e),e.$inject=["$parse","$rootScope"]}(),function(){"use strict";function e(e,t,n,i){function o(){}function r(e){console.log("playing user video"),i.playVideoId(e),i.nowPlaylist.length=0,angular.extend(i.nowPlaylist,a.videos),a.videos.forEach(function(t,n){t===e&&(i.nowPlaying.index=n)})}function u(e){i.queueVideo(e)}var a=this;a.title="MyPlaylistCtrl",a.videos=t,a.playlist=n[0],a.playVideo=r,a.queueVideo=u,o()}angular.module("youtube.playlists").controller("MyPlaylistCtrl",e),e.$inject=["$scope","videos","playlist","YoutubePlayerSettings"]}(),function(){"use strict";function e(e,t,n,i,o){function r(e){i.getPlaylist(e.id).then(t.playPlaylist)}var u=this;u.title="UserPlaylistsCtrl",u.playlists=n.tracks,u.playPlaylist=r,u.search="",u.isUserSignedIn=o.isSignedIn}angular.module("youtube.playlists").controller("MyPlaylistsController",e),e.$inject=["$http","YoutubePlayerSettings","UserPlaylists","YoutubeVideoInfo","YoutubeUser"]}(),function(){"use strict";function e(){function e(e,t){function n(e){var t=angular.element(e.target),n=t.parent();n.hasClass(i)||(r.removeClass(i),n.addClass(i))}var i="active",o=t.find("a"),r=o.parent();o.bind("click",n)}var t={link:e,restrict:"A",scope:{}};return t}angular.module("navigator").directive("navigator",e)}(),function(){"use strict";function e(e,t){function n(n){function i(){n.$watch("vm.search",function(e){var t=a.playlists.map(function(e){return e.snippet.title}).join(" ");a.showCreate=-1===t.indexOf(e)?!0:!1})}function o(e){function i(t){200===t.status&&(e.contentDetails.itemCount++,e.inProcess=!1,n.$apply())}e.inProcess=!0,t.addToPlaylist(e.id,a.getMedia()).then(i)}function r(){t.createPlaylist(a.search,"")}function u(e){return e.inProcess=!0,t.removePlaylist(e.id).then(function(){e.inProcess=!1,n.$apply()})}var a=this;a.getMedia=e.getMedia,a.playlists=t.tracks,a.search="",a.add=o,a.showCreate=!1,a.create=r,a.remove=u,i()}function i(t,n){function i(){t.$watch("isVisible()",function(e,t){if(!angular.equals(e,t)){var n=e?"show":"hide";r.modal(n)}}),r.on("hidden.bs.modal",function(){e.hide(),t.vm.search="",t.$apply()})}function o(){r.modal("hide")}var r=n;t.isVisible=e.visibility,t.close=o,i()}var o={link:i,controller:n,controllerAs:"vm",restrict:"E",replace:!0,templateUrl:"app/playlist-editor/playlist.editor.tpl.html",scope:{}};return n.$inject=["$scope"],o}angular.module("playlist.editor").directive("playlistEditor",e),e.$inject=["PlaylistEditorSettings","UserPlaylists"]}(),function(){"use strict";function e(){function e(e){u=e}function t(){return u}function n(e){u=e}function i(){l=!0}function o(){l=!1}function r(){return l}var u,a={add:e,getMedia:t,addMedia:n,show:i,hide:o,visibility:r},l=!1;return a}angular.module("playlist.editor").factory("PlaylistEditorSettings",e),e.$inject=["UserPlaylists"]}(),function(){function e(e,t){function n(n){t.params.q=e.update(t.params.q,n),t.search()}var i=this;i.data={label:"Preset"},i.presets=e.items,i.updatePreset=n,i.selected=e.selected().index}angular.module("presets").controller("PresetCtrl",e),e.$inject=["preset","YoutubeSearch"]}(),function(){"use strict";function e(e){function t(){i(s)}function n(t,n){var o=t.replace(s,"").trim();return s=n.toLowerCase(),"all"===s&&(s=""),o+=" "+s.toLowerCase(),e.set(a.PRESET,s),i(s),o}function i(e){var t=l.indexOf(e);c=-1===t?0:t}function o(){return{label:s,index:c}}function r(){return u}var u,a={PRESET:"preset"},l=["all","albums","live"],s=e.get(a.PRESET),c=0,d={selected:o,update:n,items:l,getQuery:r};return t(),d}function t(){function e(e){function t(){}return e.url.match(/v3\/search/gim)&&(e.transformRequest=t),e}return{request:e}}angular.module("presets").factory("preset",e).factory("searchListener",t),e.$inject=["localStorageService"],t.$inject=["preset"]}(),function(){"use strict";angular.module("echoes.resources").constant("YOUTUBE_API_KEY","AIzaSyB7fFNreY1UzX1la5arnnAi3ZOyvqOV6kk")}(),function(){"use strict";function e(e,t,n,i,o){function r(){e.$watch("vm.params.q",o.resetPageToken)}function u(){o.search()}function a(){u()}function l(e){function o(e){r.resolve(e[1].map(function(e){return e[0]}))}var r=n.defer();i.handleEchoesSuggest=o;{var u={params:{hl:"en",ds:"yt",xhr:"t",client:"youtube",q:e,callback:"handleEchoesSuggest"}};t.jsonp("http://suggestqueries.google.com/complete/search",u)}return r.promise}var s=this;s.title="SearchCtrl",s.params=o.params,s.search=u,s.complete=l,s.updateSearch=a,r()}angular.module("media.search").controller("SearchCtrl",e),e.$inject=["$scope","$http","$q","$window","YoutubeSearch"]}(),function(){"use strict";function e(e,t,n,i){function o(t){var n=e.defer();return a.params.playlistId=t,r(u,a).then(function(e){n.resolve(e)}),n.promise}function r(n,o){function r(){return t.get(n,o).then(function(e){return u=e.data.nextPageToken,e}).then(i.enrichItems).then(function(e){return Array.prototype.push.apply(a,e),u?(o.params.pageToken=u,r()):void l.resolve(a)})}var u,a=[],l=e.defer();return r(),l.promise}var u="https://www.googleapis.com/youtube/v3/playlistItems",a={params:{part:"snippet,contentDetails",key:n,playlistId:"",maxResults:50}},l={list:o};return l}angular.module("echoes.services").factory("PlaylistInfo",e),e.$inject=["$q","$http","YOUTUBE_API_KEY","YoutubeVideoInfo"]}(),function(){"use strict";function e(e,t){function n(t){return o.params.id=t,e.get(i,o).then(function(e){return e.data.items})}var i="https://www.googleapis.com/youtube/v3/playlists",o={params:{part:"snippet,contentDetails",key:t,id:"",maxResults:50}},r={list:n};return r}angular.module("echoes.services").factory("YoutubePlaylistInfo",e),e.$inject=["$http","YOUTUBE_API_KEY"]}(),function(){"use strict";function e(e,t,n,i,o){function r(t,i){function r(e){var t=b.params.type;y=e.data.nextPageToken;var n=e.data.items.map(function(e){return e.id[v[t]]}).join(","),i=$[t].list(n);return i}function u(e){d()===h.VIDEO&&e.forEach(function(e){e.time=n.toFriendlyDuration(e.contentDetails.duration)}),Array.prototype.push.apply(P,e)}function l(){w=!1}return i||a(),w=!0,t&&t!==b.params.q&&(b.params.pageToken=""),f(),b.params.q=t||b.params.q,o.set(g.QUERY,b.params.q),e.get(m,b).then(r).then(u).then(l)}function u(){!w&&P.length&&(b.params.pageToken=y,r(b.params.q,!0))}function a(){P.length=0}function l(){b.params.pageToken=""}function s(e){b.params.type=e,l(),P.length=0}function c(e){return""===e||void 0===e?void delete b.params.videoDuration:void(b.params.videoDuration=e)}function d(){return b.params.type}function p(){return w}function f(){b.params.type===h.PLAYLIST&&delete b.params.videoDuration}var y,m="https://www.googleapis.com/youtube/v3/search",g={QUERY:"query"},h={VIDEO:"video",PLAYLIST:"playlist"},v={video:"videoId",playlist:"playlistId"},b={params:{part:"snippet,id",key:t,q:o.get(g.QUERY),maxResults:50,type:h.VIDEO}},$={video:n,playlist:i},P=[],w=!1,S={search:r,setType:s,setDuration:c,items:P,types:h,params:b.params,getFeedType:d,getIsSearching:p,searchMore:u,resetPageToken:l};return S}angular.module("echoes.services").factory("YoutubeSearch",e),e.$inject=["$http","YOUTUBE_API_KEY","YoutubeVideoInfo","YoutubePlaylistInfo","localStorageService"]}(),function(){"use strict";function e(e,t,n,i){function o(e){r(e);var n={params:angular.extend({},f.params)};return t.get(p,n).then(function(e){return e.data.items})}function r(e){f.params.id=e}function u(e){var t=e.split("PT")[1],n="";return t?(t=t.replace(/(H|M)/g,":").replace("S",""),n=t.split(":"),n=n.map(function(e){return 1===e.length?"0"+e:e})):(t=e.split("P")[1],t=t.replace("D",""),n=[24*parseInt(t),":00:00"]),n.join(":")}function a(t){var n=e.defer();return i.getPlaylist(t).then(function(e){return l(e.items).then(function(e){var t=[];e[0].forEach(function(e){t=t.concat(e)}),n.resolve(t)})}),n.promise}function l(t){function n(e,t){var n=50*t,i=50*(t+1);return s({items:e.slice(n,i)}).then(c).then(function(e){return r[t]=e,r})}for(var i=t.length,o=Math.ceil(i/50),r=[],u=[],a=0;o>a;a++)u.push(n(t,a));return e.all(u)}function s(e){var t=e.items.map(function(e){return e.snippet.resourceId.videoId}).join(",");return o(t)}function c(e){return e.forEach(function(e){e.time=u(e.contentDetails.duration)}),e}function d(e){return s(e.result||e.data).then(c)}var p="https://www.googleapis.com/youtube/v3/videos",f={params:{part:"snippet,contentDetails,statistics",key:n,id:"",maxResults:50}},y={list:o,setId:r,toFriendlyDuration:u,getPlaylist:a,enrichItems:d,enrichItemsInBulk:l};return y}angular.module("echoes.services").factory("YoutubeVideoInfo",e),e.$inject=["$q","$http","YOUTUBE_API_KEY","UserPlaylists"]}(),function(){"use strict";function e(e,t){function n(e,n){o.nowPlaying.index=n,t.playVideoId(e)}function i(e,n,i){e.stopPropagation(),t.remove(n,i)}var o=this;o.title="UserPlaylistsCtrl",o.playlists=t.nowPlaylist,o.playVideo=n,o.nowPlaying=t.nowPlaying,o.playlistSearch="",o.remove=i,o.clearPlaylist=t.clear}angular.module("mediaDeck").controller("UserPlaylistsCtrl",e),e.$inject=["$http","YoutubePlayerSettings"]}(),function(){"use strict";function e(e){function t(t,n,i){t.$watch("isFullScreen()",function(e,t){e!==t&&n.toggleClass(i.playerResizer,e)}),t.isFullScreen=function(){return e.isFullScreen()}}var n={link:t,restrict:"A"};return n}angular.module("youtube.player").directive("playerResizer",e),e.$inject=["PlayerResizer"]}(),function(){function e(e){function t(t){if(o=t,!t)return r.height=i.height,void(r.width=i.width);var n=["sidebar"],u=-1===n.indexOf("sidebar")?$(".sidebar").outerWidth():0,a=e.innerHeight-$("#youtube-player-container").outerHeight(),l=e.innerWidth-u;r.height=a,r.width=l}function n(){return o}var i={height:270,width:300},o=!1,r={height:i.height,width:i.width,setFullScreen:t,isFullScreen:n};return r}angular.module("youtube.player").factory("PlayerResizer",e),e.$inject=["$window"]}(),function(){"use strict";function e(e,t,n){var i=n.defer(),o={ready:i.promise};return function(){var e=["http:","https:"],t="//www.youtube.com/iframe_api";e.indexOf(window.location.protocol)<0&&(t="http:"+t);var n=document.createElement("script");n.src=t;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}(),t.onYouTubeIframeAPIReady=function(){i.resolve()},o}angular.module("youtube.player").factory("youtubePlayerApi",e),e.$inject=["$rootScope","$window","$q"]}(),function(){"use strict";function e(){function e(e,t,i,o){function r(e){n.seekTo(e,!0)}function u(){return n=new YT.Player(t.id,{height:e.height,width:e.width,videoId:e.videoId,events:{onReady:l,onStateChange:a}}),angular.extend(o.ytplayer,n),n.id=t.id,n}function a(t){var n=t.data;e.$apply(function(){n===YT.PlayerState.ENDED&&o.playNextTrack()})}function l(){}var s=this;s.seek=o.getSeek,e.$watch("vm.seek()",function(e,t){n&&e!==t&&r(e)}),i.ready.then(u)}function t(e){function t(e){n.loadVideoById(e),n.playVideo()}e.$watch("videoId",function(e){n&&t(e)}),e.$watch("height",function(t,i){n&&t!==i&&n.setSize(e.width,e.height)})}var n,i={link:t,controller:e,controllerAs:"vm",restrict:"A",scope:{videoId:"=",height:"=",width:"=",index:"=",seek:"="}};return e.$inject=["$scope","$attrs","youtubePlayerApi","YoutubePlayerSettings"],i}angular.module("youtube.player").directive("youtubePlayer",e),e.$inject=["$rootScope","$window"]}(),function(){function e(){function e(){return c.mediaId}function t(e){c.mediaId=e.id,d=0,i(e),c.media=e}function n(e){p.push(e||{})}function i(e){p.some(function(t,n){return t.id===e.id?(c.index=n,!0):void 0})}function o(e,n){var i=angular.isNumber(n)?n:0,o=e[i];t(o),p.length=0,angular.extend(p,e)}function r(){return d}function u(e){!isNaN(e)&&angular.isNumber(e)&&(d=e)}function a(){var e=c.index+1;e===p.length&&(e=0),t(p[e])}function l(e,t){p.splice(t,1)}function s(){p.length=0}var c={mediaId:"",index:0,media:{}},d=0,p=[],f={},y={getCurrentId:e,playVideoId:t,playPlaylist:o,nowPlaying:c,nowPlaylist:p,queueVideo:n,getSeek:r,seekTo:u,playNextTrack:a,remove:l,ytplayer:f,clear:s};return y}angular.module("youtube.player").factory("YoutubePlayerSettings",e)}(),function(){"use strict";function e(e,t,n,i){var o=function(e){var t=e.split("PT")[1].replace(/(H|M)/g,":").replace("S",""),n=t.split(":");return n=n.map(function(e){return 1===e.length?"0"+e:e}),n.join(":")};t.list(n.id).then(function(t){e.video=t[0],e.time=o(t[0].contentDetails.duration)}),e.goBack=function(){i.url("/")}}angular.module("mediaDeck").controller("YoutubeVideoCtrl",e),e.$inject=["$scope","YoutubeVideoInfo","$routeParams","$location"]}(),function(){function e(e,t,n,i){function o(){n.search()}function r(e){return"youtube#playlist"===e.kind?void i.getPlaylist(e.id).then(a):(t.queueVideo(e),void t.playVideoId(e))}function u(e){t.queueVideo(e)}function a(e){angular.extend(t.nowPlaylist,e),t.playVideoId(e[0])}var l=this;l.playVideo=r,l.queueVideo=u,l.feedType=n.getFeedType,l.videos=n.items,l.loadMore=n.searchMore,o()}angular.module("mediaDeck").controller("YoutubeVideosCtrl",e),e.$inject=["$scope","YoutubePlayerSettings","YoutubeSearch","YoutubeVideoInfo"]}(),function(){function e(e,t,n,i){function o(e){a.showPlayer=e}function r(){a.isFullScreen=!a.isFullScreen,n.setFullScreen(a.isFullScreen)}function u(){""!==a.video.mediaId&&(i.addMedia(a.video.media),i.show())}var a=this;a.video=t.nowPlaying,a.nowPlaylist=t.nowPlaylist,a.size=n,a.showPlayer=!1,a.togglePlayer=o,a.isFullScreen=!1,a.toggleFullScreen=r,a.seek=t.getSeek,a.addToPlaylist=u,a.playNextTrack=t.playNextTrack,e.$watch("vm.video",function(e,t){e!==t&&o(!0)},!0)}angular.module("mediaDeck").controller("YoutubePlayerCtrl",e),e.$inject=["$scope","YoutubePlayerSettings","PlayerResizer","PlaylistEditorSettings"]}(),function(){"use strict";function e(e,t,n){function i(){e.$on("user-signed-in",o)}function o(){d.list().then(r,u,r)}function r(e){Array.prototype.push.apply(f,e.items)}function u(e){console.log(e)}function a(e,t){return delete p.params.mine,p.params.playlistId=e,p.list({},t)}function l(e,t){var n={part:"snippet",resource:{snippet:{playlistId:e,resourceId:{videoId:t.id,playlistId:e,kind:"youtube#video"}}}};return p.insert(n)}function s(e){return d.remove(e).then(function(t){return f.some(function(t,n){t.id===e&&f.splice(n,1)}),t})}function c(e,t){var n={part:"snippet,contentDetails",resource:{snippet:{title:e,description:t||""}}};return f.length=0,d.insert(n).then(o)}var d=n,p=t({resourceName:"playlistItems",pages:"all"}),f=[],y={tracks:f,list:o,getPlaylist:a,addToPlaylist:l,removePlaylist:s,createPlaylist:c};return i(),y}function t(e){return e({resourceName:"playlists",pages:"all"})}angular.module("youtube.api").factory("UserPlaylists",e).factory("ApiPlaylists",t),e.$inject=["$rootScope","uGapi","ApiPlaylists"],t.$inject=["uGapi"]}(),function(){"use strict";function e(e,t){function n(t){angular.copy(t,u),e.$broadcast("user-signed-in",u)}function i(){return Object.keys(u).length}function o(){function e(e){console.log("signout success",e),r()}function n(t){return""===t.statusText?e(t):void console.log("singout failed")}var i=a+gapi.auth.getToken().access_token;t.get(i).then(e,n)}function r(){Object.keys(u).forEach(function(e){delete u[e]})}var u={},a="https://accounts.google.com/o/oauth2/revoke?token=",l={update:n,data:u,isSignedIn:i,signOut:o};return l}angular.module("echoes.resources").factory("YoutubeUser",e),e.$inject=["$rootScope","$http"]}(),function(){"use strict";function e(){function e(e,t,n){e.activeIndex=""!==n.selected?parseInt(e.selected):0,e.handleClick=function(t,n){e.activeIndex=n,e.onSelect({item:t,index:n})}}var t={restrict:"E",replace:!0,templateUrl:"app/directives/ui/e-dropdown/e-dropdown-tpl.html",scope:{label:"@",icon:"@",items:"=",onSelect:"&",selected:"@"},link:e};return t}angular.module("ui.controls").directive("eDropdown",e)}(),function(){"use strict";function e(e,t,n,i){function o(){e.onGapiLoad=function(){t.$apply(function(){s.resolve()})},function(){var e=["http:","https:"],t="//apis.google.com/js/client.js?onload=onGapiLoad";e.indexOf(window.location.protocol)<0&&(t="http:"+t);var n=document.createElement("script");n.src=t;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}()}function r(){return s.promise}function u(){return r().then(function(){gapi.auth.authorize({client_id:"971861197531",scope:"https://www.googleapis.com/auth/youtube",immediate:!0},function(e){a(e)})}),c.promise}function a(e){i.load("youtube","v3").then(function(){l(e)||gapi.client.youtube.channels.list({part:"snippet,contentDetails",mine:!0}).then(function(n){console.log("results user",n),c.resolve(n.result.items[0],e),t.$digest()})})}function l(e){return e.error&&e.error.indexOf("fail")>-1}var s=n.defer(),c=n.defer(),d={load:r,auth:u,signIn:a};return o(),d}function t(e,t,n){function i(e,i){function o(e){e.preventDefault(),n.load().then(function(){gapi.auth.authorize({client_id:"971861197531",scope:"https://www.googleapis.com/auth/youtube",immediate:!1},r)})}function r(e){console.log("auth Result",e),t.signIn(e)}i.get(0).addEventListener("click",o)}var o={link:i,restrict:"A",scope:{youtubeSignIn:"&"}};return o}function n(e,t,n,i,o){function r(){return o.load().then(function(){u.resolve()}),u.promise}var u=e.defer(),a={load:r};return a}function i(e){function t(e,t){return gapi.client.setApiKey(i),gapi.client.load(e,t,n),o.promise}function n(e){console.log("client load success",e),o.resolve(e)}var i="AIzaSyCgrK5ds9uCSRM-WBUFm8V8jPX66q8-Od0",o=e.defer(),r={load:t};return r}angular.module("youtube.directives").directive("youtubeSignIn",t).factory("YoutubeApi",e).factory("YoutubeClientApi",n).factory("GoogleClientApi",i),e.$inject=["$window","$rootScope","$q","GoogleClientApi"],t.$inject=["$window","YoutubeApi","YoutubeClientApi","GoogleClientApi"],n.$inject=["$q","$rootScope","$window","GoogleClientApi","YoutubeApi"],i.$inject=["$q"]}(),function(){"use strict";function e(){function e(e){e.playSelectedVideo=function(t){e.onSelect({video:t})},e.queueSelectedVideo=function(t){e.onQueue({video:t})}}var t={restrict:"E",replace:!0,templateUrl:"app/directives/youtube/youtube-list/media-list.tpl.html",scope:{videos:"=model",onSelect:"&",onQueue:"&"},link:e};return t}angular.module("youtube.directives").directive("mediaList",e)}(),function(){function e(e,t){function n(e){function n(t){e.onPlay({video:t})}function i(t){e.onQueue({video:t})}function o(){t.addMedia(e.video),t.show()}var r=this;r.playVideo=n,r.queueVideo=i,r.add=o}var i={restrict:"E",templateUrl:"app/directives/youtube/youtube-media/youtube.media.tpl.html",replace:!0,scope:{onPlay:"&",onQueue:"&",video:"="},controller:n,controllerAs:"vm"};return n.$inject=["$scope"],i}angular.module("youtube.directives").directive("youtubeMedia",e),e.$inject=["UserPlaylists","PlaylistEditorSettings"]}(),function(){function e(){function e(e){e.isVideoItem=function(e){return"youtube#video"===e.id.kind},e.isChannelItem=function(e){return"youtube#channel"===e.id.kind},e.playVideo=function(t){e.onPlay({video:t})}}var t={restrict:"E",templateUrl:"app/directives/youtube/youtube-playlist/youtube.playlist.tpl.html",replace:!0,scope:{onPlay:"&",video:"="},link:e};return t}angular.module("youtube.directives").directive("youtubePlaylistItem",e)}();