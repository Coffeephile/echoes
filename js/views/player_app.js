define(["jquery","underscore","backbone","views/media_search","views/youtube_player","views/youtube_search_results","views/results_navigation","views/feed_filter","models/youtube_media_provider","collections/history_playlist"],function(e,t,n,r,i,s,o,u,a,f){var l=n.View.extend({initialize:function(){this.modules={},this.modules.search=new r,this.modules.search.on("search-request",this.onNewSearch,this),this.modules.mediaProvider=new a,this.modules.mediaProvider.on("new-media-response",this.onYoutubeSearchResponse,this),this.modules.youtubePlayer=new i,this.modules.resultsView=new s,this.modules.resultsView.on("search-result-selected",this.onMediaAddedToQueue,this),this.modules.resultsNav=new o,this.modules.resultsNav.on("navigate-index-change",this.onSearchResultsIndexChange,this),this.modules.historyPlaylistData=new f,this.modules.searchFeedFilter=new u,this.modules.searchFeedFilter.on("feed-type-change",this.onNewSearch,this)},renderExplore:function(){return this.modules.mediaProvider.set("query",this.modules.search.getQuery()),this.modules.mediaProvider.validateQuerySearch(),this},renderHistory:function(){return this.modules.resultsView.update(this.modules.historyPlaylistData.toJSON().reverse()),this},onYoutubeSearchResponse:function(e){this.modules.resultsView.update(e.items),this.modules.resultsNav.update(e)},onNewSearch:function(e){this.modules.mediaProvider.set(e)},onSearchResultsIndexChange:function(e){this.modules.mediaProvider.set("startIndex",e)},onMediaAddedToQueue:function(e){this.modules.youtubePlayer.play(e),this.modules.historyPlaylistData.queue(e)},toggleViews:function(e){t.each(Array.prototype.slice.call(arguments,1),function(t){t.$el.toggleClass("hidden",!e)})}});return l})