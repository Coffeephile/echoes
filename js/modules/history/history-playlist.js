define(["underscore","backbone","./history-model","collections/youtube_search_results"],function(t,e,s,i){var n=e.Model.extend({url:"https://www.googleapis.com/youtube/v3/videos",list:function(t){this.fetch({data:{part:"contentDetails,statistics",key:"AIzaSyCgrK5ds9uCSRM-WBUFm8V8jPX66q8-Od0",id:this.getIds(t),fields:"items(contentDetails,id,statistics)"}})},getIds:function(t){var e=t.map(function(t){return t.snippet.resourceId.videoId});return e.join(",")},reset:function(){var t=this.attributes.items;t&&t.length?this.attributes.items.length=0:""}}),o=i.extend({model:s,stats:new n,initialize:function(){this.listenTo(this.stats,"change:items",this.updateModels)},addItems:function(t){this.stats.reset(),this.stats.list(t),this.tempItems=t},updateModels:function(t,e){this.tempItems.forEach(function(t,s){t.id=e[s].id,t.thumbnail={hqDefault:t.snippet.thumbnails.high.url},t.likeCount=e[s].statistics.likeCount,t.duration=e[s].contentDetails.duration}),this.add(this.tempItems),this.tempItems.length=0}});return o});