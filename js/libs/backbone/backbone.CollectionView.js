(function(){function n(e){this.cv_views=[];if(e.collection)return;this._sourceRender=e.render||function(){},e.view&&e.view.collection?this.collection=new e.view.collection:this.collection=new t.Collection,this.$target=e.view.target?e.$(e.view.target):e.$el}var e=this._,t=this.Backbone;if(!e||!t||!JSON)return;n.prototype={render:function(){this.resetViews(),this.cv_views=this.collection.map(this.createItem,this),this.$target.append(e.map(this.cv_views,this.prepareItem,this)),this.trigger("view-after:render")},createItem:function(e){var t=this.view.type;return new t({model:e})},prepareItem:function(t,n){return this._currentViewIndex=n,e.each(this.view.events,this._listenToLastestView,this),t.render().el},_listenToLastestView:function(e,t){this.listenTo(this.cv_views[this._currentViewIndex],t,this[e])},renderItem:function(t){var n=this.cv_views.length,r=this.view.type;return this.cv_views.push(new r({model:t})),this.view.events&&e.each(this.view.events,function(e,t){this.listenTo(this.cv_views[n],t,this[e])},this),this.cv_views[n].render().el},resetViews:function(){e.invoke(this.cv_views,"remove"),this.cv_views.length=0},_hide:function(){this.$el.removeClass(this.transition.css)},_show:function(){this.$el.addClass(this.transition.css)}};var r=function(){t.trigger("extend:View",{key:"view",extension:n,initialize:function(){this.listenTo(this.collection,"reset destroy remove sort",function(){this.render()})}})};r(),t.on("xManager:ready",r)})();