define(["underscore","backbone","./history-model","collections/youtube_search_results"],function(e,t,n,r){var i=t.Model.extend({url:"https://www.googleapis.com/youtube/v3/videos",list:function(e){this.fetch({data:{part:"contentDetails,statistics",key:"AIzaSyCgrK5ds9uCSRM-WBUFm8V8jPX66q8-Od0",id:this.getIds(e),fields:"items(contentDetails,id,statistics)"}})},getIds:function(e){var t=e.map(function(e){return e.snippet.resourceId.videoId});return t.join(",")},reset:function(){var e=this.attributes.items;e&&e.length?this.attributes.items.length=0:""}}),s=r.extend({model:n,stats:new i,initialize:function(){this.listenTo(this.stats,"change:items",this.updateModels)},addItems:function(e){this.stats.reset(),this.stats.list(e),this.tempItems=e},updateModels:function(e,t){this.tempItems.forEach(function(e,n){e.id=t[n].id,e.thumbnail={hqDefault:e.snippet.thumbnails.high.url},e.likeCount=t[n].statistics.likeCount,e.duration=t[n].contentDetails.duration}),this.add(this.tempItems),this.tempItems.length=0}});return s});